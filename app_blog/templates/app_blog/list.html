{% extends "base.html" %}
{% load static %}
{% load utils %}

{% block content %}

<div class="container-fluid px-3 mt-4">
    <!-- Cache buster: v2.0 - 2025-12-06 -->
    <div class="mb-4">
        <h1 class="section-title" style="font-size: 2rem; font-weight: 800; color: #1a202c; margin-bottom: 1rem; display: flex; align-items: center; gap: 12px;">
            {% if site_profile.blog_page_image %}
                <img src="{{ site_profile.blog_page_image.url }}" alt="Blog" style="width: 48px; height: 48px; object-fit: cover; border-radius: 10px;">
            {% else %}
                <i class="fas fa-pen-fancy" style="color: #4a90a4;"></i>
            {% endif %}
            <span>{% if site_profile.blog_page_title %}{{ site_profile.blog_page_title }}{% else %}Articles de blog{% endif %}</span>
        </h1>
    </div>
    
    {% if site_profile.blog_page_intro %}
    <div class="section-intro mb-4">
        {{ site_profile.blog_page_intro|safe }}
    </div>
    {% endif %}

    <div class="row g-3 g-md-4">
        {% for article in articles %}
        <div class="col-md-4">
            {% if site_profile and site_profile.first_name and site_profile.last_name and site_profile.profession %}
                {% url 'profile_blogue_detail' nom=site_profile|profile_nom_slug profession=site_profile|profile_profession_slug slug=article.slug as detail_url %}
            {% else %}
                {% url 'blogue_detail' slug=article.slug as detail_url %}
            {% endif %}
            {% include 'includes/content_card.html' with item=article detail_url=detail_url button_text=site_profile.blog_detail_button_text show_author=site_profile.blog_show_author_list show_author_profession=site_profile.blog_show_profession_list show_date=site_profile.blog_show_publish_date_list show_update_date=site_profile.blog_show_update_date_list %}
        </div>
        {% empty %}
        <div class="col-12">
            <div class="alert alert-info">
                Aucun article disponible pour le moment. Revenez bient√¥t !
            </div>
        </div>
        {% endfor %}
    </div>
</div>

{% endblock %}