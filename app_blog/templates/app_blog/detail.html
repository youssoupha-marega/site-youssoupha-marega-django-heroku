{% extends "base.html" %}
{% load static %}
{% load utils %}

{% block content %}

<div class="container-fluid px-3 mt-4">
    <article>
        <!-- En-tête de l'article -->
        <h1 class="section-title mb-4" style="font-size: 2.2rem; font-weight: 700; color: #1a202c;">
            <i class="fas fa-pen-fancy me-2" style="color: #4a90a4; font-size: 1.8rem;"></i>
            {{ article.title }}
        </h1>

        <!-- Métadonnées -->
        <div class="mb-4" style="padding: 1rem; background: linear-gradient(135deg, rgba(44, 82, 130, 0.03) 0%, rgba(74, 144, 164, 0.03) 100%); border-radius: 10px; border-left: 3px solid rgba(44, 82, 130, 0.3);">
            <div class="d-flex align-items-center gap-3 mb-2" style="color: #64748b; font-size: 0.95rem;">
                <div style="display: flex; align-items: center; gap: 6px;">
                    <i class="fas fa-user-circle" style="color: #2c5282;"></i>
                    <strong>Auteur :</strong>
                    <a href="mailto:{{ article.author_email }}" style="color: #2c5282; text-decoration: none; font-weight: 600;"
                       onmouseover="this.style.textDecoration='underline'" 
                       onmouseout="this.style.textDecoration='none'">{{ article.author_name }}</a>
                    <span>, {{ article.author_profession }}</span>
                </div>
            </div>
            <div style="color: #94a3b8; font-size: 0.875rem; display: flex; align-items: center; gap: 12px; flex-wrap: wrap;">
                <div style="display: flex; align-items: center; gap: 6px;">
                    <i class="fas fa-calendar-alt" style="color: #2c5282;"></i>
                    Publié le {{ article.published_at|date:"d M Y" }}
                </div>
                <span>|</span>
                <div style="display: flex; align-items: center; gap: 6px;">
                    <i class="fas fa-sync-alt" style="color: #2c5282;"></i>
                    Mis à jour le {{ article.updated_at|date:"d M Y" }}
                </div>
            </div>
        </div>

        <!-- Image principale -->
        {% if article.main_image %}
        <div class="mb-4" style="border-radius: 12px; overflow: hidden; box-shadow: 0 4px 16px rgba(0,0,0,0.08);">
            <img src="{{ article.main_image.url }}" alt="{{ article.title }}" style="width: 100%; height: auto; display: block;">
        </div>
        {% endif %}

        <!-- Résumé -->
        <div class="mb-4">
            <p class="lead" style="font-size: 1.15rem; line-height: 1.7; color: #475569;">{{ article.resume }}</p>
        </div>

        <!-- Séparateur -->
        <div style="height: 1px; background: linear-gradient(90deg, transparent 0%, rgba(74, 144, 164, 0.2) 50%, transparent 100%); margin: 2.5rem 0;"></div>

        <!-- Contenu complet -->
        <div class="mb-5">
            <div class="content-body" style="line-height: 1.8; color: #475569;">
                {{ article.content|safe }}
            </div>
        </div>

        <!-- Bouton retour -->
        <div class="mt-5 mb-4">
            {% if site_profile and site_profile.first_name and site_profile.last_name and site_profile.profession %}
                <a href="{% url 'profile_blogue_list' nom=site_profile|profile_nom_slug profession=site_profile|profile_profession_slug %}" 
                   class="btn btn-custom-outline" 
                   style="display: inline-flex; align-items: center; gap: 8px; padding: 0.6rem 1.3rem; font-size: 0.95rem; border-radius: 10px;">
                    <i class="fas fa-arrow-left" style="font-size: 0.85rem;"></i>
                    {{ site_profile.blog_back_button_text }}
                </a>
            {% else %}
                <a href="{% url 'blogue_list' %}" 
                   class="btn btn-custom-outline" 
                   style="display: inline-flex; align-items: center; gap: 8px; padding: 0.6rem 1.3rem; font-size: 0.95rem; border-radius: 10px;">
                    <i class="fas fa-arrow-left" style="font-size: 0.85rem;"></i>
                    {{ site_profile.blog_back_button_text }}
                </a>
            {% endif %}
        </div>
    </article>
</div>

{% endblock %}